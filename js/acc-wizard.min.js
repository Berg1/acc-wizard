/*!
 * jQuery plug-in to implement an accordion wizard based on bootstrap
 * Original author: @stephen_thomas
 * Plugin Boilerplate: http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/
 * Additional Boilerplate: http://f6design.com/journal/2012/05/06/a-jquery-plugin-boilerplate/
 * Comments from boilerplate sources retained
 * Licensed under the MIT license
 */// the semi-colon before the function invocation is a safety
// net against concatenated scripts and/or other plugins
// that are not closed properly.
(function(e,t,n,r){function s(n,s){function f(t){if(t&&t.length>1){e(s.sidebar,u).children("li").children("a[href='"+t+"']").parent("li").addClass(s.activeClass);e(s.sidebar,u).children("li").children("a[href!='"+t+"']").parent("li").removeClass(s.activeClass)}}function l(){if(s.addButtons){var n=e("<div/>",{"class":s.stepClass}).append(e("<button/>",{"class":s.nextClasses,type:s.nextType,text:s.nextText}));var r=e("<div/>",{"class":s.stepClass}).append(e("<button/>",{"class":s.backClasses,type:s.backType,text:s.backText})).append(" ").append(e("<button/>",{"class":s.nextClasses,type:s.nextType,text:s.nextText}));var i=e("<div/>",{"class":s.stepClass}).append(e("<button/>",{"class":s.backClasses,type:s.backType,text:s.backText}));var o=e(".panel-collapse .panel-body form",u);var l=o.length;for(var c=0;c<l;c++){if(c===0){e(o[0]).append(n)}else if(c===l-1){e(o[l-1]).append(i)}else{e(o[c]).append(e(r).clone())}}}if(s.autoScrolling){a=t.location.hash}a=a||e(s.sidebar,u).children("li."+s.todoClass+":first").children("a").attr("href")||e(s.sidebar,u).children("li:first").children("a").attr("href");if(s.autoScrolling){t.location.hash=a}var h="#"+e(".panel-group",u)[0].id;e(".collapse",u).each(function(){if("#"+this.id===a){if(e(this).hasClass("in")){e(this).collapse({parent:h,toggle:false})}else{e(this).collapse({parent:h,toggle:true})}}else if(e(this).hasClass("in")){e(this).collapse({parent:h,toggle:true})}else{e(this).collapse({parent:h,toggle:false})}});f(a);if(s.autoScrolling){e(t).bind("hashchange",function(){if(a!==t.location.hash){a=t.location.hash;e(".panel-collapse"+a,u).collapse("show");f(a)}})}e(".panel-title a").on("click",function(){a=e(this).attr("href");f(a);if(s.autoScrolling){t.location.hash=a}});if(s.addButtons){e("."+s.stepClass,u).children("button[type='"+s.nextType+"']").click(function(n){n.preventDefault();var r=e(this).parents(".panel-collapse")[0];p("beforeNext",r);var i="#"+e(".panel-collapse",e(r).parents(".panel").next(".panel")[0])[0].id;e(i).collapse("show");p("onNext",r);a=i;f(a);t.location.hash=a});e("."+s.stepClass,u).children("button[type='"+s.backType+"']").click(function(n){n.preventDefault();var r=e(this).parents(".panel-collapse")[0];p("beforeBack",r);if(resp){var i="#"+e(".panel-collapse",e(r).parents(".panel").prev(".panel")[0])[0].id;e(i).collapse("show");p("onPrev",r);a=i;f(a);t.location.hash=a}})}p("onInit")}function c(e,t){if(t){s[e]=t}else{return s[e]}}function h(){p("onDestroy")}function p(e){if(s[e]!==r){var t=s[e];arguments[0]=o;return t.apply(this,arguments)}}var o=n,u=e(n),a;s=e.extend({},e.fn[i].defaults,s);l();return{option:c,destroy:h}}var i="accwizard";e.fn[i]=function(t){if(typeof arguments[0]==="string"){var n=arguments[0];var o=Array.prototype.slice.call(arguments,1);var u;this.each(function(){if(e.data(this,"plugin_"+i)&&typeof e.data(this,"plugin_"+i)[n]==="function"){u=e.data(this,"plugin_"+i)[n].apply(this,o)}else{throw new Error("Method "+n+" does not exist on jQuery."+i)}});if(u!==r){return u}else{return this}}else if(typeof t==="object"||!t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new s(this,t))}})}};e.fn[i].defaults={addButtons:true,sidebar:".acc-wizard-sidebar",activeClass:"acc-wizard-active",completedClass:"acc-wizard-completed",todoClass:"acc-wizard-todo",stepClass:"acc-wizard-step",nextText:"Next Step",backText:"Go Back",nextType:"submit",backType:"reset",nextClasses:"btn btn-primary",backClasses:"btn",autoScrolling:true,onNext:function(){},onBack:function(){},onInit:function(){},onDestroy:function(){}}})(jQuery,window,document)